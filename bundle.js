(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var i=o.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=o[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"6227272fbe00a2f07011.png";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function i(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}const r=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.designTool=e},(e=[{key:"generateUML",value:function(){var t=this,e="@startuml\n\n";return this.designTool.nodes.forEach((function(n){"class"===n.nodeType?e+=t.processClass(n):"interface"===n.nodeType&&(e+=t.processInterface(n))})),this.designTool.relations.forEach((function(n){e+=t.processRelation(n)})),e+="\n@enduml"}},{key:"processClass",value:function(t){var e="class ".concat(t.name," {\n");return t.properties.forEach((function(t){e+="  **".concat(t,"**\n")})),t.methods.forEach((function(t){e+="  **".concat(t,"**\n")})),e+="}\n\n"}},{key:"processInterface",value:function(t){var e="interface ".concat(t.name," {\n");return t.methods.forEach((function(t){e+="  **".concat(t,"**\n")})),e+="}\n\n"}},{key:"processRelation",value:function(t){var e=this.getArrowType(t.type);return"".concat(t.startNode.name," ").concat(e," ").concat(t.endNode.name,"\n")}},{key:"getArrowType",value:function(t){switch(t){case"extends":return"<|--";case"implements":return"<|..";case"uses":return"..>";default:return"--"}}}])&&o(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t,e,n){return(e=w(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(t){return function(t){if(Array.isArray(t))return g(t)}(t)||y(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function y(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,w(o.key),o)}}function b(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function w(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("jwlogo");t&&(t.src=e)}));var x=null;document.addEventListener("DOMContentLoaded",(function(){console.log("DOM fully loaded and parsed");var t=document.getElementById("designCanvas");if(t)if(console.log("Canvas element found"),x)console.log("DesignTool already initialized");else{x=new E(t),console.log("DesignTool initialized and ready to use"),document.getElementById("addClassBtn").addEventListener("click",(function(){x.addClass("New Class")})),document.getElementById("addInterfaceBtn").addEventListener("click",(function(){x.addInterface("New Interface")})),document.getElementById("addRelationBtn").addEventListener("click",(function(){x.onAddRelationClick()}));var e=document.getElementById("generateUMLBtn");e?(Object.assign(e.style,{backgroundColor:"#3498db",color:"white",border:"none",padding:"10px 15px",margin:"5px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"}),e.addEventListener("mouseover",(function(){e.style.backgroundColor="#2980b9"})),e.addEventListener("mouseout",(function(){e.style.backgroundColor="#3498db"})),e.addEventListener("click",(function(){x.showUML()}))):console.error("Generate UML button not found"),x.addClass("Test Node")}else console.error("Canvas element not found!");var n=document.getElementById("solidModal"),o=document.querySelector("#solidModal .close"),i=document.getElementById("toggleSOLIDBtn");n||console.error("Modal element not found!"),o||console.error("Close button not found!"),i||console.error("Toggle SOLID button not found!"),i&&n&&i.addEventListener("click",(function(){n.style.display="block"})),o&&n&&o.addEventListener("click",(function(){n.style.display="none"})),n&&window.addEventListener("click",(function(t){t.target==n&&(n.style.display="none")}))}));var k=function(){return b((function t(e,n,o){v(this,t),this.x=e,this.y=n,this.width=200,this.height=100,this.name=o,this.properties=[],this.methods=[],this.cornerRadius=10,this.padding=10,this.lineHeight=20,this.nodeType="class",this.backgroundColor="#f0f9ff",this.textColor="#2c3e50",this.fontSize=14,this.fontFamily="Arial",this.propertyFont="".concat(this.fontSize,"px ").concat(this.fontFamily),this.methodFont="italic ".concat(this.fontSize,"px ").concat(this.fontFamily),this.buttonSize=16,this.buttonPadding=5}),[{key:"draw",value:function(t){var e=this;this.updateDimensions(t),t.fillStyle=this.backgroundColor,t.strokeStyle="#3498db",t.lineWidth=2,this.roundRect(t,this.x,this.y,this.width,this.height,this.cornerRadius),t.fill(),t.stroke(),t.font="italic ".concat(this.fontSize,"px ").concat(this.fontFamily),t.fillStyle="rgba(127, 140, 141, 0.7)",t.textAlign="center",t.textBaseline="top",t.fillText("<<".concat(this.nodeType,">>"),this.x+this.width/2,this.y+10);var n=this.y+40;t.beginPath(),t.moveTo(this.x,n),t.lineTo(this.x+this.width,n),t.strokeStyle="#3498db",t.stroke(),t.fillStyle=this.textColor,t.font="bold ".concat(this.fontSize+2,"px ").concat(this.fontFamily),t.textAlign="center",t.textBaseline="top",t.fillText(this.name,this.x+this.width/2,n+10);var o=n+40;this.properties.forEach((function(n){o=e.drawItem(t,n,e.x+e.padding,o,"property")})),this.methods.forEach((function(n){o=e.drawItem(t,n,e.x+e.padding,o,"method")}));var i=this.y+this.height-this.buttonSize-this.buttonPadding;this.drawAddButton(t,this.x+this.width-2*this.buttonSize-this.buttonPadding,i,"P"),this.drawAddButton(t,this.x+this.width-this.buttonSize-this.buttonPadding,i,"M"),this.drawDeleteButton(t,this.x+this.width-20,this.y+20)}},{key:"drawItem",value:function(t,e,n,o,i){var r=this,s=this.width-2*this.padding-30,a=this.wrapText(t,e,s);t.fillStyle=this.textColor,t.textAlign="left",t.textBaseline="top",t.font="method"===i?this.methodFont:this.propertyFont,a.forEach((function(e,i){t.fillText(e,n,o+i*r.lineHeight)}));var l=this.x+this.width-20,d=o+a.length*this.lineHeight/2-this.lineHeight/2;return this.drawDeleteButton(t,l,d),o+a.length*this.lineHeight+5}},{key:"updateDimensions",value:function(t){var e=this;t.font=this.propertyFont;var n=200,o=80;[this.name].concat(f(this.properties),f(this.methods)).forEach((function(o){var i=t.measureText(o).width+2*e.padding;n=Math.max(n,i)}));var i=n-2*this.padding-30;this.properties.forEach((function(n){var r=e.wrapText(t,n,i);o+=r.length*e.lineHeight+5})),this.methods.forEach((function(n){var r=e.wrapText(t,n,i);o+=r.length*e.lineHeight+5})),o+=40,this.width=n+60,this.height=Math.max(100,o+2*this.padding)}},{key:"wrapText",value:function(t,e,n){for(var o=e.split(" "),i=[],r="",s=0;s<o.length;s++){var a=o[s];t.measureText(r+a).width<n?r+=(r?" ":"")+a:(i.push(r),r=a)}return i.push(r),i}},{key:"roundRect",value:function(t,e,n,o,i,r){o<2*r&&(r=o/2),i<2*r&&(r=i/2),t.beginPath(),t.moveTo(e+r,n),t.arcTo(e+o,n,e+o,n+i,r),t.arcTo(e+o,n+i,e,n+i,r),t.arcTo(e,n+i,e,n,r),t.arcTo(e,n,e+o,n,r),t.closePath()}},{key:"drawAddButton",value:function(t,e,n,o){t.fillStyle="#3498db",t.fillRect(e,n,this.buttonSize,this.buttonSize),t.fillStyle="white",t.font="bold 12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(o,e+this.buttonSize/2,n+this.buttonSize/2)}},{key:"drawDeleteButton",value:function(t,e,n){t.fillStyle="rgba(231, 76, 60, 0.8)",t.beginPath(),t.arc(e,n,8,0,2*Math.PI),t.fill(),t.fillStyle="white",t.font="bold 12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("×",e,n)}},{key:"isDeleteButtonClicked",value:function(t,e){var n=this.x+this.width-20,o=this.y+20;return this.isPointInsideCircle(t,e,n,o,8)}},{key:"isAddPropertyButtonClicked",value:function(t,e){var n=this.x+this.width-2*this.buttonSize-this.buttonPadding,o=this.y+this.height-this.buttonSize-this.buttonPadding;return this.isPointInsideRect(t,e,n,o,this.buttonSize,this.buttonSize)}},{key:"isAddMethodButtonClicked",value:function(t,e){var n=this.x+this.width-this.buttonSize-this.buttonPadding,o=this.y+this.height-this.buttonSize-this.buttonPadding;return this.isPointInsideRect(t,e,n,o,this.buttonSize,this.buttonSize)}},{key:"isPointInsideCircle",value:function(t,e,n,o,i){var r=t-n,s=e-o;return r*r+s*s<=i*i}},{key:"isPointInsideRect",value:function(t,e,n,o,i,r){return t>=n&&t<=n+i&&e>=o&&e<=o+r}},{key:"isPointInside",value:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}},{key:"addProperty",value:function(t){t&&""!==t.trim()&&(this.properties.push(t),this.updateDimensions(document.getElementById("designCanvas").getContext("2d")))}},{key:"addMethod",value:function(t){t&&""!==t.trim()&&(this.methods.push(t),this.updateDimensions(document.getElementById("designCanvas").getContext("2d")))}},{key:"checkDeleteButtons",value:function(t,e){var n=document.createElement("canvas").getContext("2d");n.font=this.propertyFont;for(var o=this.y+40+10+30,i=0;i<this.properties.length;i++){var r=this.properties[i],s=this.width-2*this.padding-30,a=this.wrapText(n,r,s),l=this.x+this.width-20,d=o+a.length*this.lineHeight/2-this.lineHeight/2;if(this.isPointInsideCircle(t,e,l,d,8))return{type:"property",index:i};o+=a.length*this.lineHeight+5}for(var c=0;c<this.methods.length;c++){var u=this.methods[c],h=this.width-2*this.padding-30,f=this.wrapText(n,u,h),p=this.x+this.width-20,y=o+f.length*this.lineHeight/2-this.lineHeight/2;if(this.isPointInsideCircle(t,e,p,y,8))return{type:"method",index:c};o+=f.length*this.lineHeight+5}return null}}])}(),C=function(t){function e(t,n,o){var i,r,s,a;return v(this,e),(r=this,s=e,a=[t,n,o],s=c(s),i=function(t,e){if(e&&("object"==h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,d()?Reflect.construct(s,a||[],c(r).constructor):s.apply(r,a))).nodeType="interface",console.log("InterfaceNode created: ".concat(i.name)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),b(e,[{key:"editName",value:function(t){this.name=t,console.log("Interface name changed to: ".concat(t))}}])}(k),S=function(){return b((function t(e,n,o){v(this,t),this.startNode=e,this.endNode=n,this.type=o}),[{key:"draw",value:function(t){var e=this.startNode.x+this.startNode.width/2,n=this.startNode.y+this.startNode.height/2,o=this.endNode.x+this.endNode.width/2,i=this.endNode.y+this.endNode.height/2;t.beginPath(),t.moveTo(e,n),t.lineTo(o,i),t.strokeStyle="#000",t.stroke();var r=(e+o)/2,s=(n+i)/2;t.font="12px Arial",t.fillStyle="#000",t.textAlign="center",t.textBaseline="middle",t.fillText(this.type,r,s-10);var a=Math.atan2(i-n,o-e);t.beginPath(),t.moveTo(o,i),t.lineTo(o-10*Math.cos(a-Math.PI/6),i-10*Math.sin(a-Math.PI/6)),t.lineTo(o-10*Math.cos(a+Math.PI/6),i-10*Math.sin(a+Math.PI/6)),t.closePath(),t.fill()}},{key:"isConnectedToNode",value:function(t){return this.startNode===t||this.endNode===t}}])}(),E=function(){return b((function t(e){var n=this;v(this,t),console.log("Initializing DesignTool..."),this.canvas=e,this.ctx=e.getContext("2d"),this.nodes=[],this.relations=[],this.selectedNode=null,this.relationStart=null,this.resizeCanvas(),"undefined"!=typeof window&&window.addEventListener("resize",(function(){return n.resizeCanvas()})),this.canvas.addEventListener("mousedown",(function(t){return n.onMouseDown(t)})),this.canvas.addEventListener("mousemove",(function(t){return n.onMouseMove(t)})),this.canvas.addEventListener("mouseup",(function(t){return n.onMouseUp(t)})),this.canvas.addEventListener("dblclick",(function(t){return n.onDoubleClick(t)})),this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.isAddingRelation=!1,this.relationStartNode=null,this.nextNodePosition={x:50,y:100},this.nodeGap=30,this.lastClickTime=0,this.clickDelay=300,this.canvas.style.backgroundColor="#ecf0f1",console.log("DesignTool initialized"),this.styleButtons(),this.projectTitle=this.getProjectTitle(),this.createSOLIDModal(),this.umlGenerator=new r(this),this.umlModal=null}),[{key:"createSOLIDModal",value:function(){var t=this,e=document.getElementById("solidModal");e&&e.remove();var n=document.createElement("div");n.id="solidModal",n.style.display="none",n.style.position="fixed",n.style.zIndex="1000",n.style.left="0",n.style.top="0",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="rgba(0,0,0,0.4)";var o=document.createElement("div");o.style.backgroundColor="#ecf0f1",o.style.margin="15% auto",o.style.padding="0",o.style.border="2px solid #3498db",o.style.borderRadius="8px",o.style.width="80%",o.style.maxWidth="400px",o.style.boxShadow="0 4px 8px rgba(0,0,0,0.1)";var i=document.createElement("div");i.style.backgroundColor="#3498db",i.style.color="white",i.style.padding="10px 20px",i.style.display="flex",i.style.justifyContent="space-between",i.style.alignItems="center",i.style.borderTopLeftRadius="6px",i.style.borderTopRightRadius="6px";var r=document.createElement("h2");r.textContent="SOLID Principles",r.style.margin="0",r.style.fontSize="18px",r.style.fontWeight="bold";var s=document.createElement("button");s.textContent="×",s.style.color="white",s.style.fontSize="24px",s.style.fontWeight="bold",s.style.border="none",s.style.background="none",s.style.cursor="pointer",i.appendChild(r),i.appendChild(s);var a=document.createElement("ul");a.style.listStyleType="none",a.style.padding="20px",a.style.margin="0",["S: Single Responsibility Principle","O: Open-Closed Principle","L: Liskov Substitution Principle","I: Interface Segregation Principle","D: Dependency Inversion Principle"].forEach((function(t){var e=document.createElement("li");e.style.marginBottom="10px",e.style.fontSize="14px",e.style.color="#2c3e50";var n,o=function(t){if(Array.isArray(t))return t}(n=t.split(":"))||y(n)||p(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],r=o.slice(1),s=document.createElement("strong");s.textContent=i+":",s.style.color="#3498db",s.style.marginRight="5px",e.appendChild(s),e.appendChild(document.createTextNode(r.join(":"))),a.appendChild(e)})),o.appendChild(i),o.appendChild(a),n.appendChild(o),document.body.appendChild(n),this.modal=n,this.closeBtn=s,s&&n&&s.addEventListener("click",(function(){n.style.display="none"})),n&&window.addEventListener("click",(function(t){t.target==n&&(n.style.display="none")}));var l=document.getElementById("toggleSOLIDBtn");l&&(l.replaceWith(l.cloneNode(!0)),document.getElementById("toggleSOLIDBtn").addEventListener("click",(function(){t.modal.style.display="block"})))}},{key:"getProjectTitle",value:function(){return prompt("Please enter your project title:","My UML Project")}},{key:"styleButtons",value:function(){var t=this,e="\n      padding: 10px 15px;\n      font-size: 14px;\n      font-weight: 600;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      transition: background-color 0.3s;\n      margin: 5px;\n    ",n=document.getElementById("addClassBtn");n.style.cssText=e+"background-color: #2ecc71; color: white;",n.addEventListener("mouseover",(function(){n.style.backgroundColor="#27ae60"})),n.addEventListener("mouseout",(function(){n.style.backgroundColor="#2ecc71"}));var o=document.getElementById("addInterfaceBtn");o.style.cssText=e+"background-color: #e67e22; color: white;",o.addEventListener("mouseover",(function(){o.style.backgroundColor="#d35400"})),o.addEventListener("mouseout",(function(){o.style.backgroundColor="#e67e22"}));var i=document.getElementById("addRelationBtn");i.style.cssText=e+"background-color: #e74c3c; color: white;",i.addEventListener("mouseover",(function(){i.style.backgroundColor="#c0392b"})),i.addEventListener("mouseout",(function(){i.style.backgroundColor="#e74c3c"}));var r=document.getElementById("toggleSOLIDBtn");r.style.cssText=e+"background-color: #3498db; color: white;",r.addEventListener("mouseover",(function(){r.style.backgroundColor="#2980b9"})),r.addEventListener("mouseout",(function(){r.style.backgroundColor="#3498db"}));var s=document.getElementById("generateUMLBtn");s.style.cssText=e+"background-color: #3498db; color: white;",s.addEventListener("mouseover",(function(){s.style.backgroundColor="#2980b9"})),s.addEventListener("mouseout",(function(){s.style.backgroundColor="#3498db"})),s.addEventListener("click",(function(){t.showUML()}))}},{key:"resizeCanvas",value:function(){"undefined"!=typeof window?(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight):(this.canvas.width=1024,this.canvas.height=768),console.log("Canvas resized to: ".concat(this.canvas.width,"x").concat(this.canvas.height)),this.draw()}},{key:"findNextPosition",value:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.nextNodePosition);return this.nextNodePosition.x+=220+this.nodeGap,this.nextNodePosition.x+200>this.canvas.width&&(this.nextNodePosition.x=50,this.nextNodePosition.y+=120+this.nodeGap),this.nextNodePosition.y+100>this.canvas.height&&(this.nextNodePosition={x:50,y:50}),t}},{key:"addClass",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ClassName",e=this.findNextPosition(),n=e.x,o=e.y,i=new k(n,o,t);this.nodes.push(i),this.draw(),console.log("Added class ".concat(t," at position (").concat(n,", ").concat(o,")")),this.updateLayout()}},{key:"addInterface",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"InterfaceName",e=this.findNextPosition(),n=e.x,o=e.y,i=new C(n,o,t);this.nodes.push(i),this.draw(),console.log("Added interface ".concat(t," at position (").concat(n,", ").concat(o,")")),this.updateLayout()}},{key:"startAddingRelation",value:function(){this.isAddingRelation=!0,this.relationStartNode=null,console.log("Start adding relation mode")}},{key:"addRelation",value:function(t,e,n){var o=new S(t,e,n);this.relations.push(o),this.draw()}},{key:"deleteNode",value:function(t){this.nodes=this.nodes.filter((function(e){return e!==t})),this.relations=this.relations.filter((function(e){return e.startNode!==t&&e.endNode!==t})),this.draw(),console.log("Node ".concat(t.name," deleted")),this.updateLayout()}},{key:"deleteRelation",value:function(t){this.relations=this.relations.filter((function(e){return e!==t})),this.draw(),console.log("Relation ".concat(t.type," deleted"))}},{key:"editNode",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];t.editName(e),t.attributes=n,t.methods=o,this.draw(),console.log("Node ".concat(t.name," edited: new name - ").concat(e))}},{key:"findNodeById",value:function(t){return this.nodes.find((function(e){return e.id===t}))}},{key:"findRelation",value:function(t,e){return this.relations.find((function(n){return n.startNode===t&&n.endNode===e}))}},{key:"onMouseDown",value:function(t){var e=this.canvas.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top;if(this.isAddingRelation){var i=this.nodes.find((function(t){return t.isPointInside(n,o)}));i&&(this.relationStartNode?(this.promptRelationType(this.relationStartNode,i),this.isAddingRelation=!1,this.relationStartNode=null):this.relationStartNode=i)}else{var r,a=s(this.nodes);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(l.isDeleteButtonClicked(n,o))return this.deleteNode(l),void this.draw();if(l.isAddPropertyButtonClicked(n,o))return this.addPropertyToNode(l),void this.draw();if(l.isAddMethodButtonClicked(n,o))return this.addMethodToNode(l),void this.draw();var d=l.checkDeleteButtons(n,o);if(d)return"property"===d.type?l.properties.splice(d.index,1):"method"===d.type&&l.methods.splice(d.index,1),void this.draw()}}catch(t){a.e(t)}finally{a.f()}this.selectedNode=this.nodes.find((function(t){return t.isPointInside(n,o)})),this.selectedNode&&(this.isDragging=!0,this.dragOffsetX=n-this.selectedNode.x,this.dragOffsetY=o-this.selectedNode.y)}}},{key:"onMouseMove",value:function(t){if(this.isDragging&&this.selectedNode){var e=this.canvas.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top;this.selectedNode.x=n-this.dragOffsetX,this.selectedNode.y=o-this.dragOffsetY,console.log("Node ".concat(this.selectedNode.x," moved to (").concat(this.selectedNode.x,", ").concat(this.selectedNode.y,")")),this.draw()}}},{key:"onMouseUp",value:function(t){this.isDragging=!1,this.selectedNode=null}},{key:"onDoubleClick",value:function(t){var e,n=this.canvas.getBoundingClientRect(),o=t.clientX-n.left,i=t.clientY-n.top,r=s(this.nodes);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(a.isPointInside(o,i)){var l=prompt("Enter new name for the node:",a.name);return void(null!==l&&""!==l&&("function"==typeof a.editName?a.editName(l):a.name=l,this.draw(),console.log("Node name changed to: ".concat(l))))}}}catch(t){r.e(t)}finally{r.f()}}},{key:"addPropertyToNode",value:function(t){var e=prompt("Enter new property:");e&&(t.addProperty(e),this.draw(),this.updateLayout())}},{key:"addMethodToNode",value:function(t){var e=prompt("Enter new method:");e&&(t.addMethod(e),this.draw(),this.updateLayout())}},{key:"draw",value:function(){var t=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var e=this.ctx.createLinearGradient(0,0,0,this.canvas.height);e.addColorStop(0,"#ecf0f1"),e.addColorStop(1,"#bdc3c7"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),console.log("Drawing nodes and relations"),this.relations.forEach((function(e){return e.draw(t.ctx)})),this.nodes.forEach((function(e){console.log("Drawing node ".concat(e.name)),e.draw(t.ctx)})),this.ctx.fillStyle="#2c3e50",this.ctx.font="bold 24px Arial",this.ctx.textAlign="center",this.ctx.fillText(this.projectTitle,this.canvas.width/2,30),console.log("Drawing project title: ".concat(this.projectTitle))}},{key:"generateUML",value:function(){return this.umlGenerator.generateUML()}},{key:"createUMLModal",value:function(){if(!this.umlModal){var t=document.createElement("div");t.id="umlModal",Object.assign(t.style,l(l(l({display:"none",position:"fixed",zIndex:"1000",left:"0",top:"0",width:"100%",height:"100%",overflow:"auto",backgroundColor:"rgba(0,0,0,0.4)"},"display","flex"),"justifyContent","center"),"alignItems","center"));var e=document.createElement("div");Object.assign(e.style,{backgroundColor:"#fefefe",margin:"5% auto",padding:"20px",border:"1px solid #888",width:"80%",maxWidth:"800px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",maxHeight:"90vh",overflowY:"auto"});var n=document.createElement("div");Object.assign(n.style,{backgroundColor:"#3498db",color:"white",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"});var o=document.createElement("h2");o.textContent="Generated UML",Object.assign(o.style,{margin:"0",fontSize:"18px",fontWeight:"bold"});var i=document.createElement("span");i.textContent="×",Object.assign(i.style,{color:"white",fontSize:"24px",fontWeight:"bold",cursor:"pointer"});var r=document.createElement("pre");r.id="umlContent",Object.assign(r.style,{marginTop:"20px",whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",fontSize:"14px",lineHeight:"1.6",backgroundColor:"#f8f8f8",padding:"15px",borderRadius:"5px",border:"1px solid #ddd",maxHeight:"calc(90vh - 100px)",overflowY:"auto"}),n.appendChild(o),n.appendChild(i),e.appendChild(n),e.appendChild(r),t.appendChild(e),document.body.appendChild(t),i.onclick=function(){t.style.display="none"},window.onclick=function(e){e.target==t&&(t.style.display="none")},this.umlModal=t,this.umlContent=r,this.closeBtn=i}}},{key:"showUML",value:function(){var t=this.generateUML();if(""!==t.trim()){this.umlModal||this.createUMLModal();var e=document.getElementById("umlContent");e?(e.innerHTML=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),this.umlModal.style.display="block"):console.error("UML content element not found")}else console.log("No UML content to display")}},{key:"updateLayout",value:function(){var t=this,e=20,n=70,o=0;this.nodes.forEach((function(i){e+i.width>t.canvas.width-20&&(e=20,n+=o+20,o=0),i.x=e,i.y=n,e+=i.width+20,o=Math.max(o,i.height)})),this.draw()}},{key:"onAddRelationClick",value:function(){this.startAddingRelation(),alert("Click on two nodes to create a relation")}},{key:"promptRelationType",value:function(t,e){var n=["extends","implements","uses","has","associates"],o=prompt("Enter the relation type or choose from: ".concat(n.join(", ")),n[0]);o&&this.addRelation(t,e,o)}}])}()})();
//# sourceMappingURL=bundle.js.map