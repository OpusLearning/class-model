(()=>{"use strict";var t={};function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(e=function(){return!!t})()}function n(){return n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},n.apply(null,arguments)}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,l(o.key),o)}}function c(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),console.log("Script loaded and running");var d=null;document.addEventListener("DOMContentLoaded",(function(){console.log("DOM fully loaded and parsed");var t=document.getElementById("designCanvas");t?(console.log("Canvas element found"),d?console.log("DesignTool already initialized"):(d=new y(t),console.log("DesignTool initialized and ready to use"),document.getElementById("addClassBtn").addEventListener("click",(function(){d.addClass("New Class")})),document.getElementById("addInterfaceBtn").addEventListener("click",(function(){d.addInterface("New Interface")})),document.getElementById("addRelationBtn").addEventListener("click",(function(){d.startAddingRelation(),alert("Click on two nodes to create a relation")})),d.addClass("Test Node"))):console.error("Canvas element not found!")}));var h=1,u=function(){return c((function t(e,n,o){s(this,t),this.id=h++,this.x=e,this.y=n,this.width=100,this.height=60,this.name=o,this.attributes=[],this.methods=[],console.log("ClassNode created: ".concat(this.name," at (").concat(this.x,", ").concat(this.y,")"))}),[{key:"addAttribute",value:function(t){this.attributes.push(t),console.log("Attribute added to ".concat(this.name,": ").concat(t))}},{key:"addMethod",value:function(t){this.methods.push(t),console.log("Method added to ".concat(this.name,": ").concat(t))}},{key:"draw",value:function(t){var e=this;t.fillStyle="#f0f0f0",t.fillRect(this.x,this.y,this.width,this.height),t.strokeRect(this.x,this.y,this.width,this.height),t.fillStyle="#000",t.fillText(this.name,this.x+5,this.y+15),console.log('Drawing node "'.concat(this.name,'" at (').concat(this.x,", ").concat(this.y,") with size ").concat(this.width,"x").concat(this.height));var n=this.y+30;this.attributes.forEach((function(o){t.fillText(o,e.x+5,n),n+=15})),this.methods.forEach((function(o){t.fillText(o,e.x+5,n),n+=15}))}},{key:"isPointInside",value:function(t,e){var n=t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height;return console.log("Point (".concat(t,", ").concat(e,") is ").concat(n?"inside":"outside"," node ").concat(this.name)),n}},{key:"editName",value:function(t){console.log("Node name changed from ".concat(this.name," to ").concat(t)),this.name=t}}])}(),f=function(t){function r(t,n,i){var c,l,d,h;return s(this,r),(l=this,d=r,h=[t,n,i],d=o(d),c=function(t,e){if(e&&("object"==a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(l,e()?Reflect.construct(d,h||[],o(l).constructor):d.apply(l,h))).interfaceTag="<<interface>>",c.interfaceName=i,console.log("InterfaceNode created: ".concat(c.interfaceName)),c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(r,t),c(r,[{key:"draw",value:function(t){var e,i,a;(e=r,i=this,"function"==typeof(a=n(o(1&3?e.prototype:e),"draw",i))?function(t){return a.apply(i,t)}:a)([t]),t.fillText(this.interfaceTag,this.x+5,this.y+15),t.fillText(this.interfaceName,this.x+5,this.y+30),console.log("Interface ".concat(this.interfaceName," drawn at (").concat(this.x,", ").concat(this.y,")"))}},{key:"editName",value:function(t){console.log("Interface name changed from ".concat(this.interfaceName," to ").concat(t)),this.interfaceName=t}}])}(u),g=function(){return c((function t(e,n,o){s(this,t),this.startNode=e,this.endNode=n,this.type=o,console.log("Relation created from ".concat(e.name," to ").concat(n.name," of type ").concat(o))}),[{key:"draw",value:function(t){var e=this.startNode.x+this.startNode.width/2,n=this.startNode.y+this.startNode.height/2,o=this.endNode.x+this.endNode.width/2,i=this.endNode.y+this.endNode.height/2;t.beginPath(),t.moveTo(e,n),t.lineTo(o,i),t.stroke();var a=Math.atan2(i-n,o-e);t.beginPath(),t.moveTo(o,i),t.lineTo(o-10*Math.cos(a-Math.PI/6),i-10*Math.sin(a-Math.PI/6)),t.lineTo(o-10*Math.cos(a+Math.PI/6),i-10*Math.sin(a+Math.PI/6)),t.closePath(),t.fill();var s=(e+o)/2,r=(n+i)/2;t.fillText(this.type,s,r),console.log("Relation ".concat(this.type," drawn from ").concat(this.startNode.name," to ").concat(this.endNode.name))}}])}(),y=function(){return c((function t(e){var n=this;s(this,t),console.log("Initializing DesignTool..."),this.canvas=e,this.ctx=e.getContext("2d"),this.nodes=[],this.relations=[],this.selectedNode=null,this.relationStart=null,this.resizeCanvas(),"undefined"!=typeof window&&window.addEventListener("resize",(function(){return n.resizeCanvas()})),this.canvas.addEventListener("mousedown",(function(t){return n.onMouseDown(t)})),this.canvas.addEventListener("mousemove",(function(t){return n.onMouseMove(t)})),this.canvas.addEventListener("mouseup",(function(t){return n.onMouseUp(t)})),this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.isAddingRelation=!1,console.log("DesignTool initialized")}),[{key:"resizeCanvas",value:function(){"undefined"!=typeof window?(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight):(this.canvas.width=1024,this.canvas.height=768),console.log("Canvas resized to: ".concat(this.canvas.width,"x").concat(this.canvas.height)),this.draw()}},{key:"addClass",value:function(){var t=new u(50,50,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ClassName");this.nodes.push(t),this.draw()}},{key:"addInterface",value:function(){var t=new f(50,50,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"InterfaceName");this.nodes.push(t),this.draw()}},{key:"startAddingRelation",value:function(){this.isAddingRelation=!0,console.log("Start adding relation mode")}},{key:"addRelation",value:function(t,e,n){var o=new g(t,e,n);this.relations.push(o),this.draw()}},{key:"deleteNode",value:function(t){this.nodes=this.nodes.filter((function(e){return e!==t})),this.relations=this.relations.filter((function(e){return e.startNode!==t&&e.endNode!==t})),this.draw(),console.log("Node ".concat(t.name," deleted"))}},{key:"deleteRelation",value:function(t){this.relations=this.relations.filter((function(e){return e!==t})),this.draw(),console.log("Relation ".concat(t.type," deleted"))}},{key:"editNode",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];t.editName(e),t.attributes=n,t.methods=o,this.draw(),console.log("Node ".concat(t.name," edited: new name - ").concat(e))}},{key:"findNodeById",value:function(t){return this.nodes.find((function(e){return e.id===t}))}},{key:"findRelation",value:function(t,e){return this.relations.find((function(n){return n.startNode===t&&n.endNode===e}))}},{key:"onMouseDown",value:function(t){var e=this.canvas.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top;this.selectedNode=this.nodes.find((function(t){return t.isPointInside(n,o)})),this.selectedNode&&(this.isDragging=!0,this.dragStartX=n-this.selectedNode.x,this.dragStartY=o-this.selectedNode.y,this.isAddingRelation&&(this.relationStart=this.selectedNode),console.log("Node selected: ".concat(this.selectedNode.name)))}},{key:"onMouseMove",value:function(t){if(this.isDragging&&this.selectedNode){var e=this.canvas.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top;this.selectedNode.x=n-this.dragStartX,this.selectedNode.y=o-this.dragStartY,console.log("Node ".concat(this.selectedNode.name," moved to (").concat(this.selectedNode.x,", ").concat(this.selectedNode.y,")")),this.draw()}}},{key:"onMouseUp",value:function(){if(this.isAddingRelation&&this.relationStart&&this.selectedNode&&this.relationStart!==this.selectedNode){var t=prompt("Enter relation type (e.g., extends, implements, uses):");t&&this.addRelation(this.relationStart,this.selectedNode,t),this.isAddingRelation=!1,this.relationStart=null}this.isDragging=!1,this.selectedNode=null}},{key:"draw",value:function(){var t=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#fafafa",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),console.log("Drawing nodes and relations"),this.relations.forEach((function(e){console.log("Drawing relation from ".concat(e.startNode.name," to ").concat(e.endNode.name)),e.draw(t.ctx)})),this.nodes.forEach((function(e){console.log("Drawing node ".concat(e.name)),e.draw(t.ctx)})),this.ctx.fillStyle="#333",this.ctx.font="20px Arial",this.ctx.fillText("Canvas Drawing Active",10,30)}}])}()})();
//# sourceMappingURL=bundle.js.map